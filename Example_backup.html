<!DOCTYPE HTML>
<html>

<!-- <script src="https://api.gazerecorder.com/GazeCloudAPI.js"></script> -->
<script src="./js/GazeCloudAPI.js"></script>
<script src="./js/GazeTrackingFunctions.js"></script>


<!-- script在css排版里隐藏 -->
<style type="text/css">
   body {
      overflow: hidden;
   }
</style>

<script type="text/javascript">
   //开始时接入API，清除localStorage里的所有数据；
   //GazeCloudAPI.StartEyeTracking();
   //localStorage.clear();

   //设置取眼动数据的频率，一秒多少帧？
   // var gazeFrequency = 1
   // var timeCount = false

   // var calibrationEnd = false;
   // var gazeTrackingEnd = false;

   // function GetGazeData(GazeData) {
   //    //存储眼动结果到LocalStorage
   //    if (calibrationEnd && gazeTrackingEnd == false) {
   //       //数据存储格式，[TimeStamp], [GazeX, GazeY, HeadX, HeadY, HeadZ, Yaw, Pitch, Roll]
   //       localStorage.setItem(GazeData.time, GazeData.GazeX.toString() + ',' + GazeData.GazeY.toString() + ',' + GazeData.HeadX.toString() + ',' + GazeData.HeadY.toString() + ',' + GazeData.HeadZ.toString() + ',' + GazeData.HeadYaw.toString() + ',' + GazeData.HeadPitch.toString() + ',' + GazeData.HeadRoll.toString());
   //       timeCount = false;
   //    }
   // }

   // function StopTracking() {
   //    gazeTrackingEnd = true;

   //    //从localstorage里拿到所有眼动数据并存到Blob类文件对象中，存到txt文件里并下载
   //    let data = JSON.stringify(localStorage, null, 4);
   //    let blob = new Blob([data], { type: "text/plain;charset=utf-8" });
   //    let url = URL.createObjectURL(blob);
   //    let gazeFile = document.createElement('a');
   //    gazeFile.href = url;
   //    var currentTime = new Date();
   //    gazeFile.download = currentTime.toString(); // 用当前时间来命名文件，也可根据需要来自定义存储文件的命名格式  
   //    gazeFile.click();
   //    localStorage.clear();
   // }

   //////set callbacks/////////
   // window.addEventListener("load", function () {
   //    GazeCloudAPI.OnCalibrationComplete = function () {
   //       console.log('gaze Calibration Complete');
   //       calibrationEnd = true;
   //    }
   //    GazeCloudAPI.OnCamDenied = function () { console.log('camera  access denied') }
   //    GazeCloudAPI.OnError = function (msg) { console.log('err: ' + msg) }
   //    GazeCloudAPI.UseClickRecalibration = true;
   //    GazeCloudAPI.OnResult = GetGazeData;
   // });

</script>

<head>
   <title>GazeCloudAPI</title>
</head>

<body>
   <h1>GazeCloudAPI integration example</h1>
   <!-- 用按钮来控制eye tracking的开始和结束，也可以根据需求改成其他的方式 -->
   <button type="button" onclick="StartTracking();">Start</button>
   <button type="button" onclick="StopTracking();">Stop</button>

   <!-- <div>
      <p>
      <p id="GazeData"> </p>
      <p id="HeadPhoseData"> </p>
      <p id="HeadRotData"> </p>
      </p>
   </div>
   <div id="gaze"
      style='position: absolute;display:none;width: 100px;height: 100px;border-radius: 50%;border: solid 2px  rgba(255, 255,255, .2);   box-shadow: 0 0 100px 3px rgba(125, 125,125, .5);  pointer-events: none;   z-index: 999999'>
   </div> -->
   ;
</body>

</html>